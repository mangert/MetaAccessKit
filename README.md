# MetaAccessKit

**MetaAccessKit** ‚Äî —É—á–µ–±–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –Ω–∞ Solidity, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π –≤ Ethereum:
- –ø–æ–¥–¥–µ—Ä–∂–∫–∞ **meta-—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** (—á–µ—Ä–µ–∑ `ERC2771`)
- **–∫–ª–æ–Ω–∏—Ä—É–µ–º—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã** —á–µ—Ä–µ–∑ —Ñ–∞–±—Ä–∏–∫—É
- **–æ–±–Ω–æ–≤–ª—è–µ–º—ã–µ (UUPS)** —Ñ–∞–±—Ä–∏–∫–∏
- –ø–æ–¥–¥–µ—Ä–∂–∫–∞ **ERC20 Permit** (EIP-2612)
- –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞

–ü—Ä–æ–µ–∫—Ç —Å–æ–±—Ä–∞–Ω –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª—Å—è –≤ —Å—Ä–µ–¥–µ [Hardhat](https://hardhat.org/). –í—Å–µ –∫–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞ Etherscan. –ü—Ä–æ–µ–∫—Ç —Ä–∞–∑–±–∏—Ç –ø–æ –ª–æ–≥–∏—á–µ—Å–∫–∏–º –ø–∞–ø–∫–∞–º.

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

<pre lang="markdown">
```
contracts/
‚îú‚îÄ‚îÄ commonInterfaces/
‚îÇ   ‚îî‚îÄ‚îÄ IETHAccount.sol                  # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞-—Å—á–µ—Ç–∞
‚îÇ
‚îú‚îÄ‚îÄ erc20/                               # –¢–æ–∫–µ–Ω —Å Permit –∏ –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –¥–æ—Å—Ç—É–ø–∞
‚îÇ   ‚îú‚îÄ‚îÄ AccessControl.sol
‚îÇ   ‚îú‚îÄ‚îÄ AmetistToken.sol                # –û—Å–Ω–æ–≤–Ω–æ–π —Ç–æ–∫–µ–Ω (0x97582ae3f90CC3d35c6c3f1838b0F5b2A79757C9)
‚îÇ   ‚îú‚îÄ‚îÄ ERC20Permit.sol
‚îÇ   ‚îú‚îÄ‚îÄ IAccessControl.sol
‚îÇ   ‚îî‚îÄ‚îÄ IERC20Permit.sol
‚îÇ
‚îú‚îÄ‚îÄ factory/
‚îÇ   ‚îú‚îÄ‚îÄ AccountBox.sol                  # –ü—Ä–æ—Å—Ç–∞—è —Ñ–∞–±—Ä–∏–∫–∞ –∫–ª–æ–Ω–æ–≤ (0xb7A288e48c3c3B05F209E2d07274A50d8179AF04)
‚îÇ   ‚îî‚îÄ‚îÄ ETHAccountV2.sol                # –®–∞–±–ª–æ–Ω –∞–∫–∫–∞—É–Ω—Ç–∞ (0x90306DA1df984Fb36AF138BCA13cEA66F4Fe603A)
‚îÇ
‚îú‚îÄ‚îÄ libs/
‚îÇ   ‚îî‚îÄ‚îÄ IDGenerator.sol                 # –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ ID
‚îÇ
‚îú‚îÄ‚îÄ meta/
‚îÇ   ‚îú‚îÄ‚îÄ ERC2771Context.sol
‚îÇ   ‚îú‚îÄ‚îÄ ERC2771Forwarder.sol           # –ö–æ–Ω—Ç—Ä–∞–∫—Ç-—Ñ–æ—Ä–≤–∞—Ä–¥–µ—Ä (0xd8A7886Afb35AF66be0bAFC40096c258Ce67d72E)
‚îÇ   ‚îî‚îÄ‚îÄ ETHAccountV1.sol               # –°—á–µ—Ç —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–µ—Ç–∞—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (0x36Ff21969D4E95f6eDafd265f6067D8d57E427b3)
‚îÇ
‚îú‚îÄ‚îÄ test-helpers/
‚îÇ   ‚îî‚îÄ‚îÄ ERC20Proxy.sol                 # –•–µ–ª–ø–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–æ–≤ permit
‚îÇ
‚îî‚îÄ‚îÄ UUPS/                               # –û–±–Ω–æ–≤–ª—è–µ–º–∞—è —Ñ–∞–±—Ä–∏–∫–∞ –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
    ‚îú‚îÄ‚îÄ AccountBoxV1.sol               # –§–∞–±—Ä–∏–∫–∞ V1 (0xb3f5a086e1929aa29fd4cda520dff82b845d3196)
    ‚îî‚îÄ‚îÄ AccountBoxV2.sol               # –§–∞–±—Ä–∏–∫–∞ V2 (0x9bc4640596b43e777bd3ee827ceef1d1bb47cacc)
                                        # –ü—Ä–æ–∫—Å–∏ (0x4bb63E544046f128317D3C2e22d81a9575F189bb)
                                        # –®–∞–±–ª–æ–Ω –∞–∫–∫–∞—É–Ω—Ç–∞ (0x1328c658D8b03de5a602D638abE4Cf876217d48b)

test/
‚îú‚îÄ‚îÄ setup.ts
‚îÇ
‚îú‚îÄ‚îÄ erc20/
‚îÇ   ‚îú‚îÄ‚îÄ AmetistToken.test.ts
‚îÇ   ‚îî‚îÄ‚îÄ helpers.ts
‚îÇ
‚îú‚îÄ‚îÄ factory/
‚îÇ   ‚îî‚îÄ‚îÄ Factory.test.ts
‚îÇ
‚îú‚îÄ‚îÄ meta/
‚îÇ   ‚îú‚îÄ‚îÄ meta.test.ts
‚îÇ   ‚îî‚îÄ‚îÄ helpers.ts
‚îÇ
‚îî‚îÄ‚îÄ UUPS/
    ‚îî‚îÄ‚îÄ uups.test.ts

scripts/
‚îú‚îÄ‚îÄ deployERC20.ts
‚îú‚îÄ‚îÄ deployFactory.ts
‚îú‚îÄ‚îÄ deployMeta.ts
‚îú‚îÄ‚îÄ deployUUPS.ts

```
</pre>


üîó –ê–¥—Ä–µ—Å–∞ –∑–∞–¥–µ–ø–ª–æ–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (Sepolia)
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç                         | –ò–º—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞      | –ê–¥—Ä–µ—Å –Ω–∞ Etherscan                                                                                  |
| --------------------------------- | ------------------ | --------------------------------------------------------------------------------------------------- |
| **ERC20 —Ç–æ–∫–µ–Ω**                   | `AmetistToken`     | [`0x9758...57C9`](https://sepolia.etherscan.io/address/0x97582ae3f90CC3d35c6c3f1838b0F5b2A79757C9)  |
| **–§–æ—Ä–≤–∞—Ä–¥–µ—Ä**                     | `ERC2771Forwarder` | [`0xd8A7...72E`](https://sepolia.etherscan.io/address/0xd8A7886Afb35AF66be0bAFC40096c258Ce67d72E)   |
| **–°—á–µ—Ç —Å –º–µ—Ç–∞—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏**       | `ETHAccountV1`     | [`0x36Ff...27b3`](https://sepolia.etherscan.io/address/0x36Ff21969D4E95f6eDafd265f6067D8d57E427b3)  |
| **–§–∞–±—Ä–∏–∫–∞ (–ø—Ä–æ—Å—Ç–∞—è)**             | `AccountBox`       | [`0xb7A2...AF04`](https://sepolia.etherscan.io/address/0xb7A288e48c3c3B05F209E2d07274A50d8179AF04)  |
| **–®–∞–±–ª–æ–Ω –∞–∫–∫–∞—É–Ω—Ç–∞ (–∫–ª–æ–Ω–∏—Ä—É–µ–º—ã–π)** | `ETHAccountV2`     | [`0x9030...03A`](https://sepolia.etherscan.io/address/0x90306DA1df984Fb36AF138BCA13cEA66F4Fe603A)   |
| **–ü—Ä–æ–∫—Å–∏ (UUPS)**                 | `Proxy`            | [`0x4bb6...89bb`](https://sepolia.etherscan.io/address/0x4bb63E544046f128317D3C2e22d81a9575F189bb)  |
| **–§–∞–±—Ä–∏–∫–∞ (UUPS V1)**             | `AccountBoxV1`     | [`0xb3f5...3196`](https://sepolia.etherscan.io/address/0xb3f5A086e1929aa29Fd4Cda520dFf82b845D3196)  |
| **–§–∞–±—Ä–∏–∫–∞ (UUPS V2)**             | `AccountBoxV2`     | [`0x9bc4...7cacc`](https://sepolia.etherscan.io/address/0x9bc4640596b43e777bd3ee827ceef1d1bb47cacc) |
| **–®–∞–±–ª–æ–Ω –∞–∫–∫–∞—É–Ω—Ç–∞ (UUPS)**        | `ETHAccountV2`     | [`0x1328...748b`](https://sepolia.etherscan.io/address/0x1328c658D8b03de5a602D638abE4Cf876217d48b)  |



## üõ† –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- [Solidity ^0.8.x](https://docs.soliditylang.org/)
- [Hardhat](https://hardhat.org/)
- [OpenZeppelin Contracts](https://github.com/OpenZeppelin/openzeppelin-contracts)
- [Ethers.js](https://docs.ethers.org/)
- [Chai](https://www.chaijs.com/) –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üß™ –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

| –†–∞–∑–¥–µ–ª            | –û–ø–∏—Å–∞–Ω–∏–µ                                                                 |
|-------------------|--------------------------------------------------------------------------|
| `ERC20Permit`     | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Permit –ø–æ EIP-2612, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–µ–π                      |
| `ERC2771`         | –ú–µ—Ç–∞—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —á–µ—Ä–µ–∑ –∫–∞—Å—Ç–æ–º–Ω—ã–π —Ñ–æ—Ä–≤–∞—Ä–¥–µ—Ä                                 |
| `Factory`         | –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ID                                  |
| `UUPS`            | –û–±–Ω–æ–≤–ª—è–µ–º–∞—è —Ñ–∞–±—Ä–∏–∫–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø—Ä–æ–∫—Å–∏-–∞–¥—Ä–µ—Å–∞                          |
| `–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è`     | –í—Å–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –ø—Ä–æ—à–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ [Etherscan Sepolia](https://sepolia.etherscan.io) |

---

## üßæ –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ü—Ä–æ–µ–∫—Ç **—É—á–µ–±–Ω—ã–π** –∏ —Å–ª—É–∂–∏—Ç –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤.
- –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã —Å–Ω–∞–±–∂–µ–Ω—ã —Ç–µ—Å—Ç–∞–º–∏, –ø–æ–∫—Ä—ã—Ç–∏–µ –º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å.

---

## üìç –ü—Ä–∏–º–µ—Ä –≤—ã–∑–æ–≤–∞

```bash
npx hardhat run scripts/deployUUPS.ts --network sepolia






